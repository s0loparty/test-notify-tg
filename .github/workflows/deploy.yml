name: Telegram Notify [deploy]

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Build project
        run: |
          echo "Building project..."
          sleep 5  # –≠–º—É–ª—è—Ü–∏—è —Å–±–æ—Ä–∫–∏
          echo "Build successful!"

      - name: Notify on success
        if: success()
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            "‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞! üéâ \nüîó [–ö–æ–º–º–∏—Ç](${{ github.event.head_commit.url }})"
          parse_mode: "markdown"

      - name: Notify on failure
        if: failure()
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_CHAT_ID }}
          token: ${{ secrets.TELEGRAM_BOT_TOKEN }}
          message: |
            "‚ùå –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏. \nüîó [–ö–æ–º–º–∏—Ç](${{ github.event.head_commit.url }})"
          parse_mode: "markdown"
